#!/bin/bash

usage() {
    echo "Presents an easily-extended menu of choices"
    echo ""
    echo "USAGE: growmenu <file>        Present a menu based on the choices in <file>"
}

first() {
    echo $1
}

if [[ $1 = "" ]]; then
    usage
    exit
else
    FILE=$1
    shift
    touch "$FILE"
    RESPONSE="`dmenu \"$@\" < $FILE`"
    if grep -q $RESPONSE $FILE; then
        true
    else
        echo `first $RESPONSE` >> "$FILE"
    fi
    exec $RESPONSE
fi
