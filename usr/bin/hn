#!/usr/bin/env python2.7

import sys
import re
import urllib
import textwrap

if len(sys.argv) > 1 and sys.argv[1] == "-h":
    print """Print top titles from Hacker News

USAGE: hn [<N>]           Print the top <N> titles from Hacker News (default 10)
"""
    sys.exit()

N = int(sys.argv[1]) if len(sys.argv) > 1 else 10

hn = urllib.urlopen("http://news.ycombinator.com").read()
titles = re.findall(r"<td class=\"title\"><a href=\".*?\">(.*?)</a>", hn)
for title in titles[:N]:
    lines = textwrap.wrap(title, 31)
    print " * ", lines[0].strip()
    for line in lines[1:]:
        print " "*3, line.strip()
    print


