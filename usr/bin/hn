#!/usr/bin/env python2.7

import sys
import re
import urllib
import textwrap

if len(sys.argv) > 1 and sys.argv[1] == "-h":
    print """Print top titles from Hacker News

USAGE: hn [<N>]           Print the top <N> titles from Hacker News (default 10)
"""
    sys.exit()

tw = textwrap.TextWrapper(
        width=31,
        initial_indent=" * ",
        subsequent_indent="   ")
        

N = int(sys.argv[1]) if len(sys.argv) > 1 else 10

hn = urllib.urlopen("http://news.ycombinator.com").read()
titles = re.findall(r"<td class=\"title\"><a href=\".*?\">(.*?)</a>", hn)
for title in titles[:N]:
    print tw.fill(title)
    print


